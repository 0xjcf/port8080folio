/* ========================================
   Unified Theme System
   One continuous canvas with local tints
   ======================================== */

/* ======================
   Page Canvas
   Single background for entire page
   ====================== */

/* Prevent white overscroll on all devices */
html {
  background: oklch(0.06 0 0); /* Match darkest body color */
  /* Modern overscroll control - prevents pull-to-refresh and elastic bounce */
  overscroll-behavior-y: none;
}

body {
  background:
    radial-gradient(1800px 900px at 50% 15%, oklch(0.75 0.18 55 / 0.1), transparent 55%),
    linear-gradient(oklch(0.015 0 0), oklch(0.06 0 0) 35%, oklch(0.06 0 0));
  position: relative;
  overflow-x: hidden;
  min-height: 100vh;
  /* Contain overscroll within body */
  overscroll-behavior-y: contain;
}

/* Grid + noise always-on canvas */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -1;
  /* Subtle grid */
  background:
    radial-gradient(circle at 1px 1px, oklch(1 0 0 / 0.04) 1px, transparent 1px) 0 0 / 40px 40px,
    /* Noise texture */
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='64' height='64' filter='url(%23n)' opacity='.6'/%3E%3C/svg%3E") repeat;
  opacity: 0.35;
  mix-blend-mode: screen;
}

/* ======================
   Section Shell
   Consistent scaffolding
   ====================== */

.section {
  position: relative;
  padding: clamp(72px, 10vw, 128px) 24px;
  isolation: isolate;
}

/* Section-local vignette/spotlight controlled by vars */
.section::before {
  content: "";
  position: absolute;
  inset: -80px 0 -80px 0;
  z-index: -1;
  background:
    radial-gradient(
      600px 300px at 50% var(--spot-y, 32%),
      oklch(0.75 0.18 55 / var(--spot-alpha, 0.18)),
      transparent 60%
    ),
    radial-gradient(
      1200px 600px at 50% 100%,
      hsl(var(--tint-hue, 22) 100% 50% / var(--tint-alpha, 0.14)),
      transparent 70%
    );
  mix-blend-mode: screen;
  pointer-events: none;
}

/* Consistent gutter between all sections */
.section + .section {
  box-shadow: inset 0 24px 60px oklch(0 0 0 / 0.35);
  position: relative;
}

/* Subtle top border for additional definition */
.section + .section::after {
  content: "";
  position: absolute;
  top: 0;
  left: 10%;
  right: 10%;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent,
    oklch(1 0 0 / 0.03) 20%,
    oklch(1 0 0 / 0.03) 80%,
    transparent
  );
  pointer-events: none;
  z-index: 1;
}

/* Chapter sections don't get the generic divider line */
#about.section,
#contact.section {
  box-shadow: none;
}

#about.section::after,
#contact.section::after {
  display: none;
}

/* ======================
   Section Presets
   Variable-driven atmospheres
   ====================== */

/* Hero – warm center */
#hero.section {
  --tint-hue: 22; /* warm */
  --tint-alpha: 0.14;
  --spot-alpha: 0.18;
  --spot-y: 30%;
}

/* About – chapter break with lower spotlight */
#about.section {
  --tint-hue: 18;
  --tint-alpha: 0.12;
  --spot-alpha: 0.14;
  --spot-y: 46%; /* Lower spotlight for distinct "room" feel */
}

/* Services – neutral dark with warm undertone */
#services.section {
  --tint-hue: 24;
  --tint-alpha: 0.1;
  --spot-alpha: 0.12;
  --spot-y: 40%;
}

/* Contact CTA – gentle warm center on dark */
#contact.section {
  --tint-hue: 22;
  --tint-alpha: 0.1;
  --spot-alpha: 0.16;
  --spot-y: 45%;
}

/* Contact Forms – move spotlight lower and cooler */
#contact-forms.section {
  --tint-hue: 26; /* still warm but deeper */
  --tint-alpha: 0.12;
  --spot-alpha: 0.14;
  --spot-y: 58%;
}

/* Footer - darkest, minimal tint */
.footer.section {
  --tint-hue: 28;
  --tint-alpha: 0.08;
  --spot-alpha: 0.08;
  --spot-y: 70%;
  padding-bottom: 64px;
}

/* ======================
   Unified Components
   Consistent across sections
   ====================== */

/* Section titles */
.section__title {
  text-align: center;
  font-weight: 600;
  letter-spacing: -0.02em;
  font-size: clamp(2.5rem, 6vw, 3.5rem);
  line-height: 1.2;
  margin: 0 0 40px 0;
}

.section__title .gradient {
  background: var(--brand-grad-text);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
}

/* Unified gradient divider */
.section__title::after {
  content: "";
  display: block;
  width: 40px;
  height: 2px;
  margin: 16px auto 0;
  border-radius: 999px;
  background: var(--brand-grad-text);
  opacity: 0.45;
}

/* Section subheadings */
.section__subhead {
  max-width: 70ch;
  margin: 0 auto 48px;
  text-align: center;
  color: oklch(1 0 0 / 0.8);
  font-size: 18px;
  line-height: 1.75;
}

/* ======================
   Elevation Classes
   Consistent depth system
   ====================== */

.elev-1 {
  box-shadow: var(--elev-1);
}

.elev-2 {
  box-shadow: var(--elev-2);
}

.elev-hover {
  transition:
    transform 0.22s ease,
    box-shadow 0.22s ease,
    border-color 0.22s ease;
}

.elev-hover:hover {
  transform: translateY(-3px);
  box-shadow: var(--elev-3);
}

/* Hover state for cards/tiles */
.card-hover {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.card-hover:hover {
  transform: translateY(-3px);
  box-shadow: var(--elev-3);
  border-color: oklch(1 0 0 / 0.16);
}

/* ======================
   Focus States
   Unified ring style
   ====================== */

.focus-ring:focus-visible {
  outline: 2px solid color-mix(in oklch, oklch(1 0 0) 60%, oklch(0.704 0.191 22.216) 40%);
  outline-offset: 3px;
  border-radius: 6px;
}

/* Mobile reductions for spotlight/noise intensity */
@media (max-width: 768px) {
  body::before {
    opacity: 0.18; /* lower noise/grid intensity on mobile */
    mix-blend-mode: normal; /* avoid expensive screen blend on mobile */
  }

  #hero.section {
    --spot-alpha: 0.13;
  }
  #about.section {
    --spot-alpha: 0.1;
  }
  #services.section {
    --spot-alpha: 0.08;
  }
  #contact.section {
    --spot-alpha: 0.11;
  }
  #contact-forms.section {
    --spot-alpha: 0.1;
  }
  .footer.section {
    --spot-alpha: 0.06;
  }

  /* Avoid expensive screen blending for section spotlights on mobile */
  .section::before {
    mix-blend-mode: normal;
  }
}

/* ======================
   Motion Language
   Consistent animations
   ====================== */

@media (prefers-reduced-motion: reduce) {
  .elev-hover,
  .elev-hover:hover,
  .card-hover,
  .card-hover:hover {
    transform: none;
    transition: none;
  }
}

/* ======================
   Container Sizing
   Consistent max-width
   ====================== */

.container {
  max-width: 1060px;
  margin: 0 auto;
  position: relative;
  z-index: 2;
}

/* ======================
   Gradient Accents
   Reusable classes
   ====================== */

.gradient-text {
  background: var(--brand-grad-text);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
}

.gradient-border::after {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  padding: 1px;
  background: var(--brand-grad-cta);
  -webkit-mask:
    linear-gradient(oklch(1 0 0) 0 0) content-box,
    linear-gradient(oklch(1 0 0) 0 0);
  mask:
    linear-gradient(oklch(1 0 0) 0 0) content-box,
    linear-gradient(oklch(1 0 0) 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: 0.4;
  pointer-events: none;
  transition: opacity 0.2s;
}

.gradient-border:hover::after {
  opacity: 0.6;
}

/* ======================
   Responsive Adjustments
   ====================== */

@media (min-width: 768px) {
  .section {
    padding: clamp(96px, 12vw, 160px) 24px;
  }
}

@media (max-width: 640px) {
  .section {
    padding: 64px 20px;
  }

  .section__title {
    font-size: clamp(2rem, 8vw, 2.5rem);
  }
}

/* ======================
   Performance Optimizations
   ====================== */

/* Reduce backdrop blur on mobile for better performance */
@media (max-width: 768px) {
  .kpi-tile,
  .service-card,
  .form-card,
  .contact__info,
  .about__avatar {
    backdrop-filter: blur(var(--backdrop-blur-sm));
    -webkit-backdrop-filter: blur(var(--backdrop-blur-sm));
  }

  /* Reduce heavy glows on mobile */
  .glow,
  .service-card::before,
  .kpi-tile::before {
    opacity: 0.1;
  }
}

/* Disable animations for users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms;
    animation-iteration-count: 1;
    transition-duration: 0.01ms;
    scroll-behavior: auto;
  }
}

/* =============  Chapter Canvas & Panel System  ============= */
:root {
  /* Chapter defaults (can be overridden per section) */
  --section-bg:
    radial-gradient(
      1200px 800px at 50% 15%,
      oklch(0.75 0.18 55 / 0.12) 0%,
      oklch(0.75 0.18 55 / 0.05) 28%,
      oklch(0 0 0 / 0) 60%
    ), oklch(0.06 0 0);
  --section-grid-color: oklch(1 0 0 / 0.03);
  --section-grid-size: 56px;
  --section-fg: var(--color-text);

  /* Panel tokens */
  --panel-bg: oklch(0.12 0 0 / 0.66);
  --panel-stroke: oklch(1 0 0 / 0.08);
  --panel-shadow: 0 20px 40px oklch(0 0 0 / 0.35);
  --panel-blur: 10px;
  --panel-glow: 0 0 0 0 oklch(0.75 0.18 55 / 0); /* be gentle by default */
}

.chapter {
  position: relative;
  color: var(--section-fg);
  background: var(--section-bg);
  overflow: hidden;
}

/* Reduce panel blur on mobile to lower GPU cost */
@media (max-width: 640px) {
  :root {
    --panel-blur: var(--backdrop-blur-sm);
  }
}
.chapter::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(transparent 99%, var(--section-grid-color) 1%),
    linear-gradient(90deg, transparent 99%, var(--section-grid-color) 1%);
  background-size: var(--section-grid-size) var(--section-grid-size);
  pointer-events: none;
}
.chapter__title {
  font-weight: var(--font-light);
}
.chapter__title .gradient {
  background-image: var(--brand-grad-text);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  color: transparent;
  font-weight: 600;
  display: inline;
}
.chapter__title .text-white {
  color: oklch(1 0 0);
  font-weight: 600;
  display: inline;
}
.chapter__title::after {
  content: "";
  display: block;
  width: 40px;
  height: 2px;
  margin: 16px auto 0;
  border-radius: 999px;
  background: var(--brand-grad-text);
  opacity: 0.45;
}

/* Panel primitive */
.panel {
  background: var(--panel-bg);
  border: 1px solid var(--panel-stroke);
  border-radius: var(--radius-2xl);
  backdrop-filter: blur(var(--panel-blur));
  box-shadow: var(--panel-shadow);
  transition:
    box-shadow var(--transition-base),
    transform var(--transition-base);
}
.panel:hover {
  box-shadow: var(--panel-shadow), var(--panel-glow);
  transform: translateY(-2px);
}

/* Variants (tune ember strength per chapter) */
.chapter--about {
  --section-bg:
    radial-gradient(1100px 700px at 48% 12%, oklch(0.75 0.18 55 / 0.1), oklch(0 0 0 / 0) 60%),
    oklch(0.06 0 0);
}
.chapter--cta {
  --section-bg:
    radial-gradient(1000px 650px at 54% 12%, oklch(0.75 0.18 55 / 0.08), oklch(0 0 0 / 0) 60%),
    oklch(0.06 0 0);
}
.chapter--forms {
  --section-bg:
    radial-gradient(900px 600px at 44% 10%, oklch(0.75 0.18 55 / 0.07), oklch(0 0 0 / 0) 60%),
    oklch(0.06 0 0);
}
